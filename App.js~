import React from 'react';
import Orientation from 'react-native-orientation';
import { AppNavigator, landscapeOrientationScreens } from './src/navigators/AppNavigator';

const handleOrientation = currentRouteName => (
  landscapeOrientationScreens.includes(currentRouteName) ?
    Orientation.lockToLandscapeLeft() : Orientation.lockToPortrait()
);

const onNavigationStateChange = (prevState, currentState) => {
  const routes = currentState.routes;
  const currentRouteName = routes[routes.length - 1].routeName;
  handleOrientation(currentRouteName);
};

export default () => <AppNavigator onNavigationStateChange={onNavigationStateChange} />;
